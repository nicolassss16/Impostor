<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiverso Impostor</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        /* ESTILOS GENERALES */
        body { font-family: 'Segoe UI', sans-serif; background: #0e0e10; color: #fff; text-align: center; margin: 0; padding: 20px; min-height: 100vh; }
        .hidden { display: none !important; }
        
        /* CONTENEDOR PRINCIPAL */
        .container { max-width: 600px; margin: 0 auto; padding-bottom: 60px; /* Espacio para que no choque con el copyright */ }

        /* GRID DE CATEGOR√çAS */
        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        
        .cat-card {
            background: #1f1f23; border: 2px solid #333; border-radius: 12px; padding: 20px;
            cursor: pointer; transition: 0.3s; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .cat-card:hover { transform: translateY(-5px); border-color: #a970ff; background: #26262c; }
        .cat-icon { font-size: 40px; margin-bottom: 10px; }
        .cat-title { font-weight: bold; font-size: 18px; text-transform: uppercase; }

        /* INPUTS Y BOTONES */
        .input-box { background: #18181b; padding: 30px; border-radius: 15px; border: 1px solid #333; margin-top: 20px; }
        input { width: 90%; padding: 12px; margin: 10px 0; background: #0e0e10; border: 1px solid #333; color: white; border-radius: 6px; font-size: 16px; }
        
        .btn-action { width: 100%; padding: 15px; background: #9147ff; color: white; border: none; font-weight: bold; font-size: 16px; border-radius: 6px; cursor: pointer; margin-top: 10px; }
        .btn-action:hover { background: #772ce8; }
        .btn-secondary { background: #333; margin-top: 10px; }

        /* JUEGO */
        .role-impostor { color: #ff4f4d; text-shadow: 0 0 10px rgba(255, 79, 77, 0.4); font-size: 32px; font-weight: bold; }
        .role-crew { color: #00f0a0; text-shadow: 0 0 10px rgba(0, 240, 160, 0.4); font-size: 32px; font-weight: bold; }
        
        ul { list-style: none; padding: 0; text-align: left; }
        li { padding: 10px; border-bottom: 1px solid #333; }

        /* --- NUEVO: ESTILO DEL COPYRIGHT CIRCULAR --- */
        #copyright-badge {
            position: fixed; /* Se queda fijo en la pantalla */
            bottom: 20px;    /* Distancia desde abajo */
            right: 20px;     /* Distancia desde la derecha */
            
            /* Forma circular y tama√±o */
            width: 60px;
            height: 60px;
            border-radius: 50%;
            
            /* Colores y bordes (siguiendo el tema violeta) */
            background: rgba(31, 31, 35, 0.9); /* Fondo oscuro semi-transparente */
            border: 2px solid #9147ff;
            color: #a970ff;
            
            /* Centrar el texto dentro del c√≠rculo */
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            
            /* Tipograf√≠a peque√±a */
            font-size: 9px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            line-height: 1.1;
            
            /* Un toque de estilo: rotaci√≥n ligera y sombra */
            transform: rotate(-10deg);
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            z-index: 9999; /* Asegura que siempre est√© encima de todo */
            cursor: default;
            transition: 0.3s;
        }
        
        /* Efecto al pasar el mouse por encima */
        #copyright-badge:hover {
             transform: rotate(0deg) scale(1.1);
             background: #9147ff;
             color: #fff;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>üïµÔ∏è ¬øQui√©n es el Impostor?</h1>

        <div id="screen-menu">
            <h3>Elige una categor√≠a</h3>
            <div class="grid-menu">
                <div class="cat-card" onclick="selectCategory('lol')">
                    <div class="cat-icon">‚öîÔ∏è</div>
                    <div class="cat-title">League of LoL</div>
                </div>
                <div class="cat-card" onclick="selectCategory('futbol')">
                    <div class="cat-icon">‚öΩ</div>
                    <div class="cat-title">F√∫tbol</div>
                </div>
                <div class="cat-card" onclick="selectCategory('comida')">
                    <div class="cat-icon">üçï</div>
                    <div class="cat-title">Comida</div>
                </div>
                <div class="cat-card" onclick="selectCategory('paises')">
                    <div class="cat-icon">üåç</div>
                    <div class="cat-title">Pa√≠ses</div>
                </div>
                <div class="cat-card" onclick="selectCategory('streamers')">
                    <div class="cat-icon">üìπ</div>
                    <div class="cat-title">Streamers</div>
                </div>
                <div class="cat-card" onclick="selectCategory('cosas')">
                    <div class="cat-icon">üì¶</div>
                    <div class="cat-title">Cosas Random</div>
                </div>
            </div>
        </div>

        <div id="screen-login" class="input-box hidden">
            <h2 id="selected-cat-title">MODO: ???</h2>
            <input type="text" id="username" placeholder="Tu Apodo" maxlength="15">
            <input type="text" id="room" placeholder="C√≥digo de Sala (ej: 1234)" maxlength="10">
            <button class="btn-action" onclick="joinGame()">ENTRAR A LA SALA</button>
            <button class="btn-action btn-secondary" onclick="goBack()">‚¨Ö VOLVER</button>
        </div>

        <div id="screen-lobby" class="input-box hidden">
            <h2>Sala: <span id="lobby-room-code" style="color:#a970ff"></span></h2>
            <p>Categor√≠a: <strong id="lobby-category">...</strong></p>
            <p>Jugadores conectados:</p>
            <ul id="player-list"></ul>
            <div id="waiting-msg" style="color: #777;">Esperando m√°s jugadores...</div>
            <button id="start-btn" class="btn-action hidden" onclick="startGame()">COMENZAR PARTIDA</button>
        </div>

        <div id="screen-game" class="input-box hidden">
            <h2 id="game-role-title"></h2>
            <div id="game-word" style="font-size: 24px; margin: 20px 0;"></div>
            <p style="font-style: italic; color: #888;">Orden para hablar:</p>
            <ul id="speak-order"></ul>
            <button class="btn-action btn-secondary" onclick="location.reload()">SALIR / NUEVA</button>
        </div>
    </div>

    <div id="copyright-badge">
        Creado por<br>TU NOMBRE AQU√ç<br>¬© 2023
    </div>


    <script>
        const socket = io();
        let selectedCategory = '';
        let myRoom = '';

        // --- NAVEGACI√ìN ---
        function selectCategory(cat) {
            selectedCategory = cat;
            document.getElementById('screen-menu').classList.add('hidden');
            document.getElementById('screen-login').classList.remove('hidden');
            document.getElementById('selected-cat-title').innerText = "MODO: " + cat.toUpperCase();
        }

        function goBack() {
            document.getElementById('screen-login').classList.add('hidden');
            document.getElementById('screen-menu').classList.remove('hidden');
        }

        // --- SOCKETS ---
        function joinGame() {
            const name = document.getElementById('username').value.trim();
            const room = document.getElementById('room').value.trim().toUpperCase();

            if (!name || !room) return alert("¬°Faltan datos!");

            myRoom = room;
            socket.emit('joinRoom', { roomCode: room, username: name, category: selectedCategory });

            document.getElementById('screen-login').classList.add('hidden');
            document.getElementById('screen-lobby').classList.remove('hidden');
            document.getElementById('lobby-room-code').innerText = room;
        }

        socket.on('updatePlayerList', (data) => {
            const players = data.players;
            const currentCat = data.category;
            document.getElementById('lobby-category').innerText = currentCat.toUpperCase();
            
            const list = document.getElementById('player-list');
            list.innerHTML = players.map(p => `<li>üë§ ${p.name}</li>`).join('');

            const btn = document.getElementById('start-btn');
            const msg = document.getElementById('waiting-msg');
            
            if (players.length >= 3) {
                btn.classList.remove('hidden');
                msg.classList.add('hidden');
            } else {
                btn.classList.add('hidden');
                msg.classList.remove('hidden');
            }
        });

        function startGame() {
            socket.emit('startGame', myRoom);
        }

        socket.on('gameStarted', (data) => {
            document.getElementById('screen-lobby').classList.add('hidden');
            document.getElementById('screen-game').classList.remove('hidden');

            const roleTitle = document.getElementById('game-role-title');
            const wordDiv = document.getElementById('game-word');

            if (data.role === 'impostor') {
                roleTitle.innerText = "ü§´ ERES EL IMPOSTOR";
                roleTitle.className = "role-impostor";
                wordDiv.innerText = "Tu objetivo: Fingir que sabes de qu√© hablan.";
            } else {
                roleTitle.innerText = "ERES TRIPULANTE";
                roleTitle.className = "role-crew";
                wordDiv.innerHTML = `La palabra secreta (${data.category}) es:<br><br><strong style="font-size:40px; color:#fff;">${data.word}</strong>`;
            }

            const list = document.getElementById('speak-order');
            list.innerHTML = data.order.map((name, i) => `<li>${i+1}. ${name}</li>`).join('');
        });
    </script>
</body>
</html>
